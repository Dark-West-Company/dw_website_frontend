import"../chunks/DsnmJJEf.js";import"../chunks/CjiiVrWd.js";import{o as bt,a as pt}from"../chunks/Kmuhr-ln.js";import{H as Fe,p as P,f as C,c as j,r as $,s as n,t as X,a as O,b as F,g as i,q as d,u,au as s,i as ye,h as wt,j as yt,e as kt}from"../chunks/D1A2w5RJ.js";import{i as E}from"../chunks/Bjz8fhAO.js";import{i as W}from"../chunks/D4z-0_Bc.js";import{s as ae,e as le}from"../chunks/BuqVqMeC.js";import{p as q}from"../chunks/eXyJeQny.js";import{r as ke,s as H}from"../chunks/BRAZgn98.js";import{b as xe}from"../chunks/D43DJqH5.js";import{e as xt}from"../chunks/hR3FX6br.js";function Tt(a,l){return a==null?null:String(a)}function St(a,l,e,r){var c=a.__style;if(Fe||c!==l){var h=Tt(l);(!Fe||h!==a.getAttribute("style"))&&(h==null?a.removeAttribute("style"):a.style.cssText=h),a.__style=l}return r}function $t(a){return{all:a=a||new Map,on:function(l,e){var r=a.get(l);r?r.push(e):a.set(l,[e])},off:function(l,e){var r=a.get(l);r&&(e?r.splice(r.indexOf(e)>>>0,1):a.set(l,[]))},emit:function(l,e){var r=a.get(l);r&&r.slice().map(function(c){c(e)}),(r=a.get("*"))&&r.slice().map(function(c){c(l,e)})}}}const Q=$t(),Y={SHEET_DATA_CHANGED:"sheetDataChanged"};var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jt(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var oe,We;function lt(){if(We)return oe;We=1;function a(l){var e=typeof l;return l!=null&&(e=="object"||e=="function")}return oe=a,oe}var ue,Be;function At(){if(Be)return ue;Be=1;var a=typeof re=="object"&&re&&re.Object===Object&&re;return ue=a,ue}var se,Ue;function at(){if(Ue)return se;Ue=1;var a=At(),l=typeof self=="object"&&self&&self.Object===Object&&self,e=a||l||Function("return this")();return se=e,se}var de,ze;function Et(){if(ze)return de;ze=1;var a=at(),l=function(){return a.Date.now()};return de=l,de}var ve,Ke;function qt(){if(Ke)return ve;Ke=1;var a=/\s/;function l(e){for(var r=e.length;r--&&a.test(e.charAt(r)););return r}return ve=l,ve}var ce,Je;function It(){if(Je)return ce;Je=1;var a=qt(),l=/^\s+/;function e(r){return r&&r.slice(0,a(r)+1).replace(l,"")}return ce=e,ce}var fe,Ve;function nt(){if(Ve)return fe;Ve=1;var a=at(),l=a.Symbol;return fe=l,fe}var ge,Xe;function Ot(){if(Xe)return ge;Xe=1;var a=nt(),l=Object.prototype,e=l.hasOwnProperty,r=l.toString,c=a?a.toStringTag:void 0;function h(b){var w=e.call(b,c),m=b[c];try{b[c]=void 0;var o=!0}catch{}var g=r.call(b);return o&&(w?b[c]=m:delete b[c]),g}return ge=h,ge}var _e,Qe;function Rt(){if(Qe)return _e;Qe=1;var a=Object.prototype,l=a.toString;function e(r){return l.call(r)}return _e=e,_e}var me,Ye;function Ct(){if(Ye)return me;Ye=1;var a=nt(),l=Ot(),e=Rt(),r="[object Null]",c="[object Undefined]",h=a?a.toStringTag:void 0;function b(w){return w==null?w===void 0?c:r:h&&h in Object(w)?l(w):e(w)}return me=b,me}var he,Ze;function Dt(){if(Ze)return he;Ze=1;function a(l){return l!=null&&typeof l=="object"}return he=a,he}var be,et;function Nt(){if(et)return be;et=1;var a=Ct(),l=Dt(),e="[object Symbol]";function r(c){return typeof c=="symbol"||l(c)&&a(c)==e}return be=r,be}var pe,tt;function Gt(){if(tt)return pe;tt=1;var a=It(),l=lt(),e=Nt(),r=NaN,c=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,b=/^0o[0-7]+$/i,w=parseInt;function m(o){if(typeof o=="number")return o;if(e(o))return r;if(l(o)){var g=typeof o.valueOf=="function"?o.valueOf():o;o=l(g)?g+"":g}if(typeof o!="string")return o===0?o:+o;o=a(o);var f=h.test(o);return f||b.test(o)?w(o.slice(2),f?2:8):c.test(o)?r:+o}return pe=m,pe}var we,rt;function Ht(){if(rt)return we;rt=1;var a=lt(),l=Et(),e=Gt(),r="Expected a function",c=Math.max,h=Math.min;function b(w,m,o){var g,f,y,x,_,S,A=0,I=!1,R=!1,L=!0;if(typeof w!="function")throw new TypeError(r);m=e(m)||0,a(o)&&(I=!!o.leading,R="maxWait"in o,y=R?c(e(o.maxWait)||0,m):y,L="trailing"in o?!!o.trailing:L);function k(T){var D=g,N=f;return g=f=void 0,A=T,x=w.apply(N,D),x}function ne(T){return A=T,_=setTimeout(B,m),I?k(T):x}function z(T){var D=T-S,N=T-A,te=m-D;return R?h(te,y-N):te}function K(T){var D=T-S,N=T-A;return S===void 0||D>=m||D<0||R&&N>=y}function B(){var T=l();if(K(T))return J(T);_=setTimeout(B,z(T))}function J(T){return _=void 0,L&&g?k(T):(g=f=void 0,x)}function Z(){_!==void 0&&clearTimeout(_),A=0,g=S=f=_=void 0}function ee(){return _===void 0?x:J(l())}function U(){var T=l(),D=K(T);if(g=arguments,f=this,S=T,D){if(_===void 0)return ne(S);if(R)return clearTimeout(_),_=setTimeout(B,m),k(S)}return _===void 0&&(_=setTimeout(B,m)),x}return U.cancel=Z,U.flush=ee,U}return we=b,we}var Lt=Ht();const it=jt(Lt);var Mt=C('<div class="flex items-center w-full"><label class="mr-2 w-20 text-right"> </label> <input class="border rounded px-3 py-2 grow" type="text"/></div>');function G(a,l){P(l,!1);let e=q(l,"id",8,""),r=q(l,"label",8,""),c=q(l,"value",12,""),h=q(l,"placeholder",8,"not set");const b=it(y=>{Q.emit(Y.SHEET_DATA_CHANGED,y)},500);function w(y){c(y.target.value),b(c())}W();var m=Mt(),o=j(m),g=j(o,!0);$(o);var f=n(o,2);ke(f),$(m),X(()=>{H(o,"for",e()),ae(g,r()),H(f,"id",e()),H(f,"placeholder",h())}),xe(f,c),le("input",f,w),O(a,m),F()}var Pt=C('<div class="flex items-center w-full"><label class="mr-2 w-20 text-right"> </label> <input class="border rounded px-3 py-2 grow" type="number"/></div>');function Ft(a,l){P(l,!1);let e=q(l,"id",8,""),r=q(l,"label",8,""),c=q(l,"value",12,null),h=q(l,"placeholder",8,"not set");const b=it(y=>{Q.emit(Y.SHEET_DATA_CHANGED,y)},500);function w(y){let x=parseInt(y.target.value,10);isNaN(x)&&(x=""),c(x),b(c())}W();var m=Pt(),o=j(m),g=j(o,!0);$(o);var f=n(o,2);ke(f),$(m),X(()=>{H(o,"for",e()),ae(g,r()),H(f,"id",e()),H(f,"placeholder",h())}),xe(f,c),le("input",f,w),O(a,m),F()}var Wt=C('<button type="button" class="w-4 h-4 rounded-full border flex items-center justify-center cursor-pointer"></button>'),Bt=C('<div class="flex gap-1 items-center w-full"><label class="font-medium mb-1" for="dot-text-field"> </label> <input id="dot-text-field" class="border-b px-2 py-1 mb-1 w-full" type="text"/> <div class="flex gap-1"></div></div>');function v(a,l){P(l,!1);let e=q(l,"label",8),r=q(l,"value",12,""),c=q(l,"level",12,0),h=q(l,"sheet",12),b=q(l,"field",8),w=[1,2,3,4,5];function m(S){r(S.target.value??"")}function o(S){c(S),h(h()[b()]=S,!0),Q.emit(Y.SHEET_DATA_CHANGED,h())}W();var g=Bt(),f=j(g),y=j(f,!0);$(f);var x=n(f,2);ke(x);var _=n(x,2);xt(_,5,()=>w,S=>S,(S,A)=>{var I=Wt();X(()=>{St(I,`background: ${i(A)<c()?"#444":"#eee"}`),H(I,"title",`Set level to ${i(A)+1}`),H(I,"aria-label",`Set level to ${i(A)+1}`)}),le("click",I,()=>o(i(A)+1)),O(S,I)}),$(_),$(g),X(()=>ae(y,e())),xe(x,r),le("input",x,m),O(a,g),F()}var Ut=C('<div class="w-full"><h2 class="text-2xl font-semibold mb-2 text-center">Attributes</h2> <div class="grid grid-cols-3 gap-x-6 w-full"><!> <!> <!> <!> <!> <!> <!> <!> <!></div></div>');function zt(a,l){P(l,!1);let e=q(l,"sheet",8);W();var r=Ut(),c=n(j(r),2),h=j(c);{let _=d(()=>(s(e()),u(()=>e().strength??0)));v(h,{label:"Strength",value:"",get level(){return i(_)},get sheet(){return e()},field:"strength"})}var b=n(h,2);{let _=d(()=>(s(e()),u(()=>e().charisma??0)));v(b,{label:"Charisma",value:"",get level(){return i(_)},get sheet(){return e()},field:"charisma"})}var w=n(b,2);{let _=d(()=>(s(e()),u(()=>e().perception??0)));v(w,{label:"Perception",value:"",get level(){return i(_)},get sheet(){return e()},field:"perception"})}var m=n(w,2);{let _=d(()=>(s(e()),u(()=>e().dexterity??0)));v(m,{label:"Dexterity",value:"",get level(){return i(_)},get sheet(){return e()},field:"dexterity"})}var o=n(m,2);{let _=d(()=>(s(e()),u(()=>e().manipulation??0)));v(o,{label:"Manipulation",value:"",get level(){return i(_)},get sheet(){return e()},field:"manipulation"})}var g=n(o,2);{let _=d(()=>(s(e()),u(()=>e().intelligence??0)));v(g,{label:"Intelligence",value:"",get level(){return i(_)},get sheet(){return e()},field:"intelligence"})}var f=n(g,2);{let _=d(()=>(s(e()),u(()=>e().stamina??0)));v(f,{label:"Stamina",value:"",get level(){return i(_)},get sheet(){return e()},field:"stamina"})}var y=n(f,2);{let _=d(()=>(s(e()),u(()=>e().appearance??0)));v(y,{label:"Appearance",value:"",get level(){return i(_)},get sheet(){return e()},field:"appearance"})}var x=n(y,2);{let _=d(()=>(s(e()),u(()=>e().wits??0)));v(x,{label:"Wits",value:"",get level(){return i(_)},get sheet(){return e()},field:"wits"})}$(c),$(r),O(a,r),F()}var Kt=C("<!> <!>",1),Jt=C("<!> <!>",1),Vt=C('<div class="w-full"><h2 class="text-2xl font-semibold mb-2 text-center">Abilities</h2> <div class="grid grid-cols-3 gap-x-6 w-full"><div><h3 class="text-lg font-bold mb-2 text-center">Talents</h3> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div><h3 class="text-lg font-bold mb-2 text-center">Skills</h3> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div><h3 class="text-lg font-bold mb-2 text-center">Knowledges</h3> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function Xt(a,l){P(l,!1);let e=q(l,"sheet",8);const r=e().character_type??"vampire";W();var c=Vt(),h=n(j(c),2),b=j(h),w=n(j(b),2);{let t=d(()=>(s(e()),u(()=>e().talent_alertness??0)));v(w,{label:"Alertness",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_alertness"})}var m=n(w,2);{var o=t=>{{let p=d(()=>(s(e()),u(()=>e().talent_art??0)));v(t,{label:"Art",value:"",get level(){return i(p)},get sheet(){return e()},field:"talent_art"})}};E(m,t=>{r==="mage"&&t(o)})}var g=n(m,2);{let t=d(()=>(s(e()),u(()=>e().talent_athletics??0)));v(g,{label:"Athletics",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_athletics"})}var f=n(g,2);{var y=t=>{{let p=d(()=>(s(e()),u(()=>e().talent_awareness??0)));v(t,{label:"Awareness",value:"",get level(){return i(p)},get sheet(){return e()},field:"talent_awareness"})}};E(f,t=>{(r==="human"||r==="vampire"||r==="mage")&&t(y)})}var x=n(f,2);{let t=d(()=>(s(e()),u(()=>e().talent_brawl??0)));v(x,{label:"Brawl",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_brawl"})}var _=n(x,2);{let t=d(()=>(s(e()),u(()=>e().talent_empathy??0)));v(_,{label:"Empathy",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_empathy"})}var S=n(_,2);{let t=d(()=>(s(e()),u(()=>e().talent_expression??0)));v(S,{label:"Expression",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_expression"})}var A=n(S,2);{let t=d(()=>(s(e()),u(()=>e().talent_intimidation??0)));v(A,{label:"Intimidation",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_intimidation"})}var I=n(A,2);{let t=d(()=>(s(e()),u(()=>e().talent_leadership??0)));v(I,{label:"Leadership",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_leadership"})}var R=n(I,2);{var L=t=>{{let p=d(()=>(s(e()),u(()=>e().talent_primal_urge??0)));v(t,{label:"Primal-Urge",value:"",get level(){return i(p)},get sheet(){return e()},field:"talent_primal_urge"})}};E(R,t=>{r==="werewolf"&&t(L)})}var k=n(R,2);{let t=d(()=>(s(e()),u(()=>e().talent_streetwise??0)));v(k,{label:"Streetwise",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_streetwise"})}var ne=n(k,2);{let t=d(()=>(s(e()),u(()=>e().talent_subterfuge??0)));v(ne,{label:"Subterfuge",value:"",get level(){return i(t)},get sheet(){return e()},field:"talent_subterfuge"})}$(b);var z=n(b,2),K=n(j(z),2);{var B=t=>{{let p=d(()=>(s(e()),u(()=>e().skill_animal_ken??0)));v(t,{label:"Animal Ken",value:"",get level(){return i(p)},get sheet(){return e()},field:"skill_animal_ken"})}};E(K,t=>{(r==="human"||r==="vampire"||r==="werewolf")&&t(B)})}var J=n(K,2);{let t=d(()=>(s(e()),u(()=>e().skill_crafts??0)));v(J,{label:"Crafts",value:"",get level(){return i(t)},get sheet(){return e()},field:"skill_crafts"})}var Z=n(J,2);{let t=d(()=>(s(e()),u(()=>e().skill_drive??0)));v(Z,{label:"Drive",value:"",get level(){return i(t)},get sheet(){return e()},field:"skill_drive"})}var ee=n(Z,2);{let t=d(()=>(s(e()),u(()=>e().skill_etiquette??0)));v(ee,{label:"Etiquette",value:"",get level(){return i(t)},get sheet(){return e()},field:"skill_etiquette"})}var U=n(ee,2);{let t=d(()=>(s(e()),u(()=>e().skill_firearms??0)));v(U,{label:"Firearms",value:"",get level(){return i(t)},get sheet(){return e()},field:"skill_firearms"})}var T=n(U,2);{var D=t=>{{let p=d(()=>(s(e()),u(()=>e().skill_larceny??0)));v(t,{label:"Larceny",value:"",get level(){return i(p)},get sheet(){return e()},field:"skill_larceny"})}};E(T,t=>{(r==="human"||r==="vampire"||r==="werewolf")&&t(D)})}var N=n(T,2);{var te=t=>{var p=Kt(),V=ye(p);{let M=d(()=>(s(e()),u(()=>e().skill_martial_arts??0)));v(V,{label:"Martial Arts",value:"",get level(){return i(M)},get sheet(){return e()},field:"skill_martial_arts"})}var ie=n(V,2);{let M=d(()=>(s(e()),u(()=>e().skill_meditation??0)));v(ie,{label:"Meditation",value:"",get level(){return i(M)},get sheet(){return e()},field:"skill_meditation"})}O(t,p)};E(N,t=>{r==="mage"&&t(te)})}var Te=n(N,2);{let t=d(()=>(s(e()),u(()=>e().skill_melee??0)));v(Te,{label:"Melee",value:"",get level(){return i(t)},get sheet(){return e()},field:"skill_melee"})}var Se=n(Te,2);{var ot=t=>{{let p=d(()=>(s(e()),u(()=>e().skill_performance??0)));v(t,{label:"Performance",value:"",get level(){return i(p)},get sheet(){return e()},field:"skill_performance"})}};E(Se,t=>{(r==="human"||r==="vampire"||r==="werewolf")&&t(ot)})}var $e=n(Se,2);{var ut=t=>{{let p=d(()=>(s(e()),u(()=>e().skill_research??0)));v(t,{label:"Research",value:"",get level(){return i(p)},get sheet(){return e()},field:"skill_research"})}};E($e,t=>{r==="mage"&&t(ut)})}var je=n($e,2);{let t=d(()=>(s(e()),u(()=>e().skill_stealth??0)));v(je,{label:"Stealth",value:"",get level(){return i(t)},get sheet(){return e()},field:"skill_stealth"})}var Ae=n(je,2);{let t=d(()=>(s(e()),u(()=>e().skill_survival??0)));v(Ae,{label:"Survival",value:"",get level(){return i(t)},get sheet(){return e()},field:"skill_survival"})}var st=n(Ae,2);{var dt=t=>{{let p=d(()=>(s(e()),u(()=>e().skill_technology??0)));v(t,{label:"Technology",value:"",get level(){return i(p)},get sheet(){return e()},field:"skill_technology"})}};E(st,t=>{r==="mage"&&t(dt)})}$(z);var Ee=n(z,2),qe=n(j(Ee),2);{let t=d(()=>(s(e()),u(()=>e().knowledge_academics??0)));v(qe,{label:"Academics",value:"",get level(){return i(t)},get sheet(){return e()},field:"knowledge_academics"})}var Ie=n(qe,2);{let t=d(()=>(s(e()),u(()=>e().knowledge_computer??0)));v(Ie,{label:"Computer",value:"",get level(){return i(t)},get sheet(){return e()},field:"knowledge_computer"})}var Oe=n(Ie,2);{var vt=t=>{var p=Jt(),V=ye(p);{let M=d(()=>(s(e()),u(()=>e().knowledge_cosmology??0)));v(V,{label:"Cosmology",value:"",get level(){return i(M)},get sheet(){return e()},field:"knowledge_cosmology"})}var ie=n(V,2);{let M=d(()=>(s(e()),u(()=>e().knowledge_esoterica??0)));v(ie,{label:"Esoterica",value:"",get level(){return i(M)},get sheet(){return e()},field:"knowledge_esoterica"})}O(t,p)};E(Oe,t=>{r==="mage"&&t(vt)})}var Re=n(Oe,2);{var ct=t=>{{let p=d(()=>(s(e()),u(()=>e().knowledge_enigmas??0)));v(t,{label:"Enigmas",value:"",get level(){return i(p)},get sheet(){return e()},field:"knowledge_enigmas"})}};E(Re,t=>{(r==="werewolf"||r==="mage")&&t(ct)})}var Ce=n(Re,2);{var ft=t=>{{let p=d(()=>(s(e()),u(()=>e().knowledge_finance??0)));v(t,{label:"Finance",value:"",get level(){return i(p)},get sheet(){return e()},field:"knowledge_finance"})}};E(Ce,t=>{(r==="human"||r==="vampire")&&t(ft)})}var De=n(Ce,2);{let t=d(()=>(s(e()),u(()=>e().knowledge_investigation??0)));v(De,{label:"Investigation",value:"",get level(){return i(t)},get sheet(){return e()},field:"knowledge_investigation"})}var Ne=n(De,2);{let t=d(()=>(s(e()),u(()=>e().knowledge_law??0)));v(Ne,{label:"Law",value:"",get level(){return i(t)},get sheet(){return e()},field:"knowledge_law"})}var Ge=n(Ne,2);{let t=d(()=>(s(e()),u(()=>e().knowledge_medicine??0)));v(Ge,{label:"Medicine",value:"",get level(){return i(t)},get sheet(){return e()},field:"knowledge_medicine"})}var He=n(Ge,2);{let t=d(()=>(s(e()),u(()=>e().knowledge_occult??0)));v(He,{label:"Occult",value:"",get level(){return i(t)},get sheet(){return e()},field:"knowledge_occult"})}var Le=n(He,2);{var gt=t=>{{let p=d(()=>(s(e()),u(()=>e().knowledge_rituals??0)));v(t,{label:"Rituals",value:"",get level(){return i(p)},get sheet(){return e()},field:"knowledge_rituals"})}};E(Le,t=>{r==="werewolf"&&t(gt)})}var Me=n(Le,2);{var _t=t=>{{let p=d(()=>(s(e()),u(()=>e().knowledge_politics??0)));v(t,{label:"Politics",value:"",get level(){return i(p)},get sheet(){return e()},field:"knowledge_politics"})}};E(Me,t=>{(r==="human"||r==="vampire"||r==="mage")&&t(_t)})}var Pe=n(Me,2);{let t=d(()=>(s(e()),u(()=>e().knowledge_science??0)));v(Pe,{label:"Science",value:"",get level(){return i(t)},get sheet(){return e()},field:"knowledge_science"})}var mt=n(Pe,2);{var ht=t=>{{let p=d(()=>(s(e()),u(()=>e().knowledge_technology??0)));v(t,{label:"Technology",value:"",get level(){return i(p)},get sheet(){return e()},field:"knowledge_technology"})}};E(mt,t=>{(r==="human"||r==="vampire"||r==="werewolf")&&t(ht)})}$(Ee),$(h),$(c),O(a,c),F()}var Qt=C('<div class="flex flex-col items-center w-full px-10"><h1 class="text-4xl font-bold mt-4 mb-8 text-center capitalize"> </h1> <div class="grid grid-cols-3 grid-rows-3 gap-2 w-full"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="w-full mt-8"><!></div> <div class="w-full mt-8"><!></div></div>');function Yt(a,l){P(l,!1);let e=q(l,"sheet",12);W();var r=Qt(),c=j(r),h=j(c,!0);$(c);var b=n(c,2),w=j(b);G(w,{id:"name",label:"Name",get value(){return e().name},set value(k){e(e().name=k,!0)},$$legacy:!0});var m=n(w,2);G(m,{id:"nature",label:"Nature",get value(){return e().nature},set value(k){e(e().nature=k,!0)},$$legacy:!0});var o=n(m,2);Ft(o,{id:"age",label:"Age",get value(){return e().age},set value(k){e(e().age=k,!0)},$$legacy:!0});var g=n(o,2);G(g,{id:"player",label:"Player",get value(){return e().player},set value(k){e(e().player=k,!0)},$$legacy:!0});var f=n(g,2);G(f,{id:"demeanor",label:"Demeanor",get value(){return e().demeanor},set value(k){e(e().demeanor=k,!0)},$$legacy:!0});var y=n(f,2);G(y,{id:"sex",label:"Sex",get value(){return e().sex},set value(k){e(e().sex=k,!0)},$$legacy:!0});var x=n(y,2);G(x,{id:"chronicle",label:"Chronicle",get value(){return e().chronicle},set value(k){e(e().chronicle=k,!0)},$$legacy:!0});var _=n(x,2);G(_,{id:"concept",label:"Concept",get value(){return e().concept},set value(k){e(e().concept=k,!0)},$$legacy:!0});var S=n(_,2);G(S,{id:"residence",label:"Residence",get value(){return e().residence},set value(k){e(e().residence=k,!0)},$$legacy:!0}),$(b);var A=n(b,2),I=j(A);zt(I,{get sheet(){return e()}}),$(A);var R=n(A,2),L=j(R);Xt(L,{get sheet(){return e()}}),$(R),$(r),X(()=>ae(h,(s(e()),u(()=>e().character_type)))),O(a,r),F()}var Zt=C('<div class="flex flex-col w-full h-full"><!></div>'),er=C('<div class="flex items-center justify-center w-full h-full"><p>Character sheet not found.</p></div>');function cr(a,l){P(l,!1);let e="",r=kt(null);async function c(){if(!i(r)||!i(r).data)return;const o="http://direct.laminatedconcrete.com:9000",g=localStorage.getItem("jwt");try{console.log("Updating sheet data on backend:",i(r));const y=await(await fetch(`${o}/api/character/sheet/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},credentials:"include",body:JSON.stringify(i(r).data)})).json();y.success||console.error("Failed to update character sheet:",y.error)}catch(f){console.error("Error updating character sheet:",f)}}bt(async()=>{let o="";if(window.location.pathname.startsWith("/sheets/")&&(o=window.location.pathname.split("/").pop()),e=o,e){const g="http://direct.laminatedconcrete.com:9000",f=localStorage.getItem("jwt");try{const y=await fetch(`${g}/api/character/sheet/${e}`,{headers:{Authorization:`Bearer ${f}`},credentials:"include"});y.ok?(yt(r,await y.json()),console.log("Loaded sheet:",i(r)),(!i(r)||i(r).error||i(r).success===!1)&&(window.location.href="/sheets")):window.location.href="/sheets"}catch{window.location.href="/sheets"}}Q.on(Y.SHEET_DATA_CHANGED,c)}),pt(()=>{Q.off(Y.SHEET_DATA_CHANGED,c)}),W();var h=wt(),b=ye(h);{var w=o=>{var g=Zt(),f=j(g);Yt(f,{get sheet(){return i(r).data}}),$(g),O(o,g)},m=o=>{var g=er();O(o,g)};E(b,o=>{i(r)?o(w):o(m,!1)})}O(a,h),F()}export{cr as component};
