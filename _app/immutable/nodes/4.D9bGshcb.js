import"../chunks/DsnmJJEf.js";import"../chunks/CjiiVrWd.js";import{o as _e}from"../chunks/Kmuhr-ln.js";import{p as me,f as g,a as c,b as xe,s as e,c as i,r as t,t as V,g as f,d as X,m as H,e as we,h as ye,i as he,j as ke,u as k}from"../chunks/D1A2w5RJ.js";import{w as A,s as Y,e as G}from"../chunks/BuqVqMeC.js";import{i as L}from"../chunks/Bjz8fhAO.js";import{e as Ge}from"../chunks/hR3FX6br.js";import{r as E}from"../chunks/BRAZgn98.js";import{b as N}from"../chunks/D43DJqH5.js";import{i as Ne}from"../chunks/D4z-0_Bc.js";import{s as $e,a as T,b as K}from"../chunks/rsp-Ylvk.js";var je=g('<div class="text-red-600 mb-2"> </div>'),Ce=g("<div>Loading gifts...</div>"),Se=g('<div class="text-gray-500 mb-4">No werewolf gifts have been created yet.</div>'),Ae=g('<li class="flex items-center justify-between px-2 py-1 border-b border-background-500"><span class="font-medium"> </span> <button class="text-xs py-1 px-2">Edit</button></li>'),Le=g('<ul class="flex flex-col gap-2 border-t border-background-500"></ul>'),Te=g('<div class="p-4 bg-gray-50 max-w-lg mt-4"><h2 class="font-semibold mb-2">Create Gift</h2> <div class="flex gap-6"><label>Name: <input class="border border-background-500 px-2 w-full mb-2"/></label> <label>Level: <input type="number" min="1" max="5" class="border border-background-500 px-3 py-2 w-16 mb-2"/></label></div> <label>Description: <textarea class="border border-background-500 px-3 py-2 w-full mb-2"></textarea></label> <button class="px-3 py-1 bg-blue-700 text-white rounded">Save</button> <button class="ml-2 px-3 py-1 bg-gray-400 text-white rounded">Cancel</button></div>'),De=g('<div class="p-4 bg-gray-50 max-w-lg"><h2 class="font-semibold mb-2">Edit Gift</h2> <div class="flex gap-6 mb-4"><label>Name: <input class="border border-background-500 px-3 py-2"/></label> <label>Level: <input type="number" min="1" max="5" class="border border-background-500 px-3 py-2 w-16"/></label></div> <label>Description: <textarea class="border border-background-500 px-3 py-2 w-full h-64 mb-2"></textarea></label> <button class="px-3 py-1 bg-blue-700 text-white rounded">Save</button> <button class="ml-2 px-3 py-1 bg-gray-400 text-white rounded">Cancel</button></div>'),Ee=g('<div class="text-gray-500 mt-4">Select a gift to edit or create a new one.</div>'),Fe=g('<div class="flex grow"><div class="w-64 min-w-56 border-r border-t border-background-500"><button class="mb-1 w-full px-3 py-2">New Gift</button> <!></div> <div class="flex-1 pl-4 rounded-lg border-l border-t border-background-500"><!></div></div>'),Oe=g('<div class="h-full w-full flex flex-col"><div class="flex items-center gap-2"><a href="/admin" class="px-4 py-2 bg-gray-200 rounded-lg text-gray-700 text-xl font-bold hover:bg-gray-300" title="Back to Admin">&larr;</a> <h1 class="text-2xl font-bold">Werewolf Gifts Admin</h1></div> <!> <!></div>');function Ie(Z,ee){me(ee,!1);const M=()=>T(v,"$error",$),te=()=>T(O,"$loading",$),R=()=>T(U,"$gifts",$),ae=()=>T(j,"$creating",$),d=()=>T(_,"$editingGift",$),[$,re]=$e(),F="http://direct.laminatedconcrete.com:9000",U=A([]),O=A(!0),v=A(""),_=A(null),j=A(!1);let s=we({gift_name:"",gift_description:"",gift_level:1});async function B(){O.set(!0),v.set("");try{const r=await(await fetch(`${F}/api/admin/werewolf-gifts`,{credentials:"include"})).json();r.success?U.set(r.gifts):v.set(r.error||"Failed to load gifts")}catch{v.set("Network error")}O.set(!1)}async function ie(){v.set("");try{const r=await(await fetch(`${F}/api/admin/werewolf-gifts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({gift_name:f(s).gift_name,gift_description:f(s).gift_description,gift_level:f(s).gift_level})})).json();r.success?(B(),j.set(!1),ke(s,{gift_name:"",gift_description:"",gift_level:1})):v.set(r.error||"Failed to create gift")}catch{v.set("Network error")}}async function se(a){v.set("");try{const m=await(await fetch(`${F}/api/admin/werewolf-gifts/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({gift_name:a.gift_name,gift_description:a.gift_description,gift_level:a.gift_level})})).json();m.success?(B(),_.set(null)):v.set(m.error||"Failed to update gift")}catch{v.set("Network error")}}_e(B),Ne();var J=Oe(),W=e(i(J),2);{var oe=a=>{var r=je(),m=i(r,!0);t(r),V(()=>Y(m,M())),c(a,r)};L(W,a=>{M()&&a(oe)})}var le=e(W,2);{var ne=a=>{var r=Ce();c(a,r)},de=a=>{var r=Fe(),m=i(r),q=i(m),ce=e(q,2);{var fe=o=>{var n=Se();c(o,n)},ve=o=>{var n=Le();Ge(n,5,R,p=>p.id,(p,x)=>{var w=Ae(),l=i(w),b=i(l,!0);t(l);var u=e(l,2);t(w),V(()=>Y(b,f(x).gift_name)),G("click",u,()=>{_.set({...f(x)}),j.set(!1)}),c(p,w)}),t(n),c(o,n)};L(ce,o=>{R().length===0?o(fe):o(ve,!1)})}t(m);var z=e(m,2),be=i(z);{var ge=o=>{var n=Te(),p=e(i(n),2),x=i(p),w=e(i(x));E(w),t(x);var l=e(x,2),b=e(i(l));E(b),t(l),t(p);var u=e(p,2),h=e(i(u));X(h),t(u);var C=e(u,2),D=e(C,2);t(n),N(w,()=>f(s).gift_name,y=>H(s,f(s).gift_name=y)),N(b,()=>f(s).gift_level,y=>H(s,f(s).gift_level=y)),N(h,()=>f(s).gift_description,y=>H(s,f(s).gift_description=y)),G("click",C,ie),G("click",D,()=>j.set(!1)),c(o,n)},pe=o=>{var n=ye(),p=he(n);{var x=l=>{var b=De(),u=e(i(b),2),h=i(u),C=e(i(h));E(C),t(h);var D=e(h,2),y=e(i(D));E(y),t(D),t(u);var P=e(u,2),I=e(i(P));X(I),t(P);var Q=e(P,2),ue=e(Q,2);t(b),N(C,()=>d().gift_name,S=>K(_,k(d).gift_name=S,k(d))),N(y,()=>d().gift_level,S=>K(_,k(d).gift_level=S,k(d))),N(I,()=>d().gift_description,S=>K(_,k(d).gift_description=S,k(d))),G("click",Q,()=>se(d())),G("click",ue,()=>_.set(null)),c(l,b)},w=l=>{var b=Ee();c(l,b)};L(p,l=>{d()?l(x):l(w,!1)},!0)}c(o,n)};L(be,o=>{ae()?o(ge):o(pe,!1)})}t(z),t(r),G("click",q,()=>{j.set(!0),_.set(null)}),c(a,r)};L(le,a=>{te()?a(ne):a(de,!1)})}t(J),c(Z,J),xe(),re()}export{Ie as component};
