import"../chunks/DsnmJJEf.js";import"../chunks/CjiiVrWd.js";import{o as i}from"../chunks/Kmuhr-ln.js";import{p as l,f as p,a as d,b as m}from"../chunks/D1A2w5RJ.js";import{i as f}from"../chunks/D4z-0_Bc.js";import{g as e}from"../chunks/DYi9zZFM.js";var g=p('<div class="flex flex-col items-center justify-center h-screen"><div class="text-secondary-400 text-xl font-bold">Logging you in via Discord...</div></div>');function S(n,s){l(s,!1),i(async()=>{const t=new URLSearchParams(window.location.search).get("code");if(!t){e("/");return}const a="undefined/api/auth/discord/callback";console.log("Attempting to POST to:",a);try{const o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})});if(o.ok){const{token:c}=await o.json();localStorage.setItem("jwt",c)}}catch{}e("/")}),f();var r=g();d(n,r),m()}export{S as component};
