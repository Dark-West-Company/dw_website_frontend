import"../chunks/DsnmJJEf.js";import"../chunks/CjiiVrWd.js";import{p as ee,aw as T,ax as te,f as d,a as o,b as ae,c,s as n,j as z,e as H,g as e,u as f,r,h as re,i as se,t as M}from"../chunks/D1A2w5RJ.js";import{e as x,s as N}from"../chunks/BuqVqMeC.js";import{i as $}from"../chunks/Bjz8fhAO.js";import{e as Y}from"../chunks/hR3FX6br.js";import{i as oe}from"../chunks/D4z-0_Bc.js";import{s as ne,a as ie}from"../chunks/rsp-Ylvk.js";import{u as le}from"../chunks/BOzFjxGZ.js";function ce({parent:j}){return j().then(({characterInfo:w})=>({sheets:w??[],characters:w?.map(i=>({id:i.character_id,name:i.name,type:i.character_type}))??[]}))}const Ce=Object.freeze(Object.defineProperty({__proto__:null,load:ce},Symbol.toStringTag,{value:"Module"}));var de=d('<li class="mb-2 flex items-center justify-between"><span class="font-semibold"> </span> <button class="ml-4 bg-wod-red px-3 py-1 rounded hover:bg-red-700">View</button></li>'),pe=d('<div class="mb-8 w-full max-w-xl"><h3 class="text-xl font-semibold mb-2">Unassociated Character Sheets</h3> <ul class="mb-4"></ul></div>'),ve=d(`<div class="text-lg text-wod-light-gray">Hey, you haven't made any characters yet!</div>`),ue=d('<span class="text-wod-light-gray"> </span>'),me=d('<span class="text-wod-light-gray">(No sheet)</span>'),fe=d('<li class="bg-wod-gray rounded p-4 flex justify-between items-center shadow"><span class="font-semibold text-lg"> </span> <!></li>'),he=d('<ul class="w-full max-w-xl space-y-4"></ul>'),_e=d('<div class="min-h-screen bg-wod-dark text-white flex flex-col items-center pt-12"><h2 class="text-3xl font-bold mb-6 text-wod-red">Your Character Sheets</h2> <!> <!> <div class="mt-12 flex gap-4"><button class="bg-wod-red px-4 py-2 rounded hover:bg-red-700">Create Vampire Sheet</button> <button class="bg-wod-red px-4 py-2 rounded hover:bg-red-700">Create Werewolf Sheet</button> <button class="bg-wod-red px-4 py-2 rounded hover:bg-red-700">Create Mage Sheet</button> <button class="bg-wod-red px-4 py-2 rounded hover:bg-red-700">Create Human Sheet</button></div></div>');function Oe(j,w){ee(w,!1);const i=()=>ie(le,"$userData",q),[q,E]=ne(),p=H(),y=H(),S=H();async function k(t){const h=localStorage.getItem("jwt");try{(await fetch("undefined/api/character/sheet",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},credentials:"include",body:JSON.stringify({sheetType:t})})).ok&&location.reload()}catch{}}function F(t){window.location.href=`/sheets/${t}`}T(()=>i(),()=>{z(p,i().sheets??[])}),T(()=>i(),()=>{z(y,i().characters??[])}),T(()=>e(p),()=>{z(S,e(p).filter(t=>!t.character_id))}),te(),oe();var C=_e(),P=n(c(C),2);{var G=t=>{var v=pe(),h=n(c(v),2);Y(h,5,()=>e(S),_=>_.id,(_,u)=>{var a=de(),s=c(a),g=c(s);r(s);var l=n(s,2);r(a),M(()=>N(g,`${e(u),f(()=>e(u).name||"Unnamed Sheet")??""} (${e(u),f(()=>e(u).character_type)??""})`)),x("click",l,()=>F(e(u).id)),o(_,a)}),r(h),r(v),o(t,v)};$(P,t=>{e(S),f(()=>e(S).length>0)&&t(G)})}var V=n(P,2);{var I=t=>{var v=re(),h=se(v);{var _=a=>{var s=ve();o(a,s)},u=a=>{var s=he();Y(s,5,()=>e(y),g=>g.id,(g,l)=>{var O=fe(),U=c(O),L=c(U,!0);r(U);var Q=n(U,2);{var R=b=>{var m=ue(),Z=c(m);r(m),M(D=>N(Z,`(Sheet: ${D??""})`),[()=>(e(p),e(l),f(()=>e(p).find(D=>D.character_id===e(l).id).type))]),o(b,m)},X=b=>{var m=me();o(b,m)};$(Q,b=>{e(p),e(l),f(()=>e(p).find(m=>m.character_id===e(l).id))?b(R):b(X,!1)})}r(O),M(()=>N(L,(e(l),f(()=>e(l).name)))),o(g,O)}),r(s),o(a,s)};$(h,a=>{e(y),f(()=>e(y).length===0)?a(_):a(u,!1)},!0)}o(t,v)};$(V,t=>{t(I,!1)})}var A=n(V,2),B=c(A),J=n(B,2),W=n(J,2),K=n(W,2);r(A),r(C),x("click",B,()=>k("vampire")),x("click",J,()=>k("werewolf")),x("click",W,()=>k("mage")),x("click",K,()=>k("human")),o(j,C),ae(),E()}export{Oe as component,Ce as universal};
