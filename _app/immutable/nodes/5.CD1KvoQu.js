import"../chunks/DsnmJJEf.js";import"../chunks/CjiiVrWd.js";import{o as i}from"../chunks/Kmuhr-ln.js";import{p as l,f as p,a as m,b as d}from"../chunks/D1A2w5RJ.js";import{i as f}from"../chunks/D4z-0_Bc.js";import{g as e}from"../chunks/DP-STAQS.js";var g=p('<div class="flex flex-col items-center justify-center h-screen"><div class="text-secondary-400 text-xl font-bold">Logging you in via Discord...</div></div>');function S(c,n){l(n,!1),i(async()=>{const t=new URLSearchParams(window.location.search).get("code");if(!t){e("/");return}const a="http://direct.laminatedconcrete.com:9000/api/auth/discord/callback";console.log("Attempting to POST to:",a);try{const o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})});if(o.ok){const{token:s}=await o.json();localStorage.setItem("jwt",s)}}catch{}e("/")}),f();var r=g();m(c,r),d()}export{S as component};
